@model Models.ViewModels.QuestionVM
<div class="question-block border p-3 mb-3" id="question-@ViewData.TemplateInfo.HtmlFieldPrefix.Replace(".", "_")">
    <button type="button" class="btn btn-danger btn-sm float-end" onclick="removeQuestion('@ViewData.TemplateInfo.HtmlFieldPrefix.Replace(".", "_")')">Usuń</button>

<div class="single-choice-question">
    <label>Pytanie:</label>
    <input asp-for="Text" class="form-control" />

    <label>Ścieżka do pliku (opcjonalnie):</label>
    <input asp-for="PathToFile" class="form-control" />

    <div class="answers">
        <label>Odpowiedzi:</label>
        <div id="answers-@Model.Id">
            @for (int i = 0; i < Model.Answers.Count; i++)
            {
                <div class="answer-item">
                    <input asp-for="Answers[i].Text" class="form-control" placeholder="Treść odpowiedzi" />
                    <input type="checkbox" asp-for="Answers[i].IsCorrect" /> Poprawna
                    <button type="button" class="btn btn-sm btn-danger" onclick="removeAnswer(this)">Usuń</button>
                </div>
            }
        </div>
        <button type="button" class="btn btn-sm btn-primary" onclick="addAnswer(@Model.Id)">Dodaj odpowiedź</button>
    </div>
</div>
</div>
<script>
    function addAnswer(questionId) {
        // prosty JS do dodania nowej odpowiedzi dynamicznie
        const container = document.getElementById(`answers-${questionId}`);
        const index = container.children.length;
        const div = document.createElement('div');
        div.className = 'answer-item';
        div.innerHTML = `<input name="Questions[${questionId}].Answers[${index}].Text" class="form-control" placeholder="Treść odpowiedzi" />
                         <input type="checkbox" name="Questions[${questionId}].Answers[${index}].IsCorrect" /> Poprawna
                         <button type="button" class="btn btn-sm btn-danger" onclick="removeAnswer(this)">Usuń</button>`;
        container.appendChild(div);
    }

    function removeAnswer(button) {
        button.parentElement.remove();
    }
</script>
